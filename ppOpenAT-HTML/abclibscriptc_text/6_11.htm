
<html>
<head>
<title>pass2.h ˜_—ƒ`ƒƒ[ƒg</title><base target="main">
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="stylesheet">
<meta http-equiv="Content-Type" content="text/html;charset=Shift_JIS">
</head>

<body bgcolor="#ffffff">

<div align="right"><font size="2">ABCLibScriptC ƒvƒƒWƒFƒNƒg</font></div>

<table width=100% bgcolor="#e6e6fa" class="titlebgcolor" border="1" cellpadding="7" cellspacing="0">
<tr>
    <td><font class="titlefont">5.11. pass2.h ˜_—ƒ`ƒƒ[ƒg</font></td>
</tr>
</table>

<p></p>
<pre>
ƒtƒ@ƒCƒ‹˜_—ƒ`ƒƒ[ƒg

     1  +--- ï»ƒ\/*=====================================================================*
     2  |     *                                                                     *           
     3  |     *   Software Name : ppOpen-AT                                         *           
     4  |     *         Version : 0.1                                               *           
     5  |     *                                                                     *           
     6  |     *   License                                                           *           
     7  |     *     This file is part of ppOpen-AT.                                 *           
     8  |     *     ppOpen-AT is a free software, you can use it under the terms    *           
     9  |     *     of The MIT License (MIT). See LICENSE file and User's guide     *           
    10  |     *     for more details.                                               *           
    11  |     *                                                                     *           
    12  |     *   ppOpen-HPC project:                                               *           
    13  |     *     Open Source Infrastructure for Development and Execution of     *           
    14  |     *     Large-Scale Scientific Applications on Post-Peta-Scale          *           
    15  |     *     Supercomputers with Automatic Tuning (AT).                      *           
    16  |     *                                                                     *           
    17  |     *   Organizations:                                                    *           
    18  |     *     The University of Tokyo                                         *           
    19  |     *       - Information Technology Center                               *           
    20  |     *       - Atmosphere and Ocean Research Institute (AORI)              *           
    21  |     *       - Graduate School of Interdisciplinary Information Studies    *           
    22  |     *         /Earthquake Research Institute (ERI)                        *           
    23  |     *       - Graduate School of Frontier Science                         *           
    24  |     *     Kyoto University                                                *           
    25  |     *       - Academic Center for Computing and Media Studies             *           
    26  |     *     Japan Agency for Marine-Earth Science and Technology (JAMSTEC)  *           
    27  |     *                                                                     *           
    28  |     *   Sponsorship:                                                      *           
    29  |     *     Japan Science and Technology Agency (JST), Basic Research       *           
    30  |     *     Programs: CREST, Development of System Software Technologies    *           
    31  |     *     for post-Peta Scale High Performance Computing.                 *           
    32  |     *                                                                     *           
    33  |     *   Copyright (c) 2012                                                *           
    34  |     *      Information Technology Center, The University of Tokyo         *           
    35  |     *                                                                     *           
    36  |     *=====================================================================*/          
    37  |     /*----------------------------------------------------------------------------*/  
    38  |    //                                                                                 
    39  |    //  æ¦‚èƒ’                                                                        
    40  |    //    ãƒ‘ã‚¹ï¼’ã€€ãƒ˜ãƒƒãƒ€                                                        
    41  |    //                                                                                 
    42  |    //  ä½œæˆè€…                                                                      
    43  |    //                                                                                 
    44  |    /*----------------------------------------------------------------------------*/   
    45  |                                                                                       
    46  +--- #ifndef pass2H
    47  +--- #define pass2H
    48  +--- //---------------------------------------------------------------------------
    49  |                                                                                   
    50  +--- #include &quot;pass1.h&quot;
    51  |    
    52  +--- void Pass2(TList *TokenList,TList *ValDataList);
    53  +--- int Pass2_Fortran(TList *TokenList,int sPos,TList *ValDataList);
    54  +--- int GetValIdx(TList *ValDataLlst,string ValName,int ModuleIdx);
    55  |    
    56  +--- void AddDataDef_Fortran(TList *TokenList,int sPos,int ePos,TList *ValDataList);
    57  +--- void AddDataDef_C(TList *TokenList,int sPos,int ePos,TList *ValDataList);
    58  |    
    59  +--- #define ARRAY_MAX   8   // æœ€å¤ƒ@ï¼˜æƒƒBå…ƒã¾ãƒ@ãƒ‡é…åˆ—ãƒHå¯ƒZå¿œã™ã‚‹ã€‚
    60  |                                                                                       
    61  +--- //
    62  |    // å¤‰æ•°ãƒ‡ãƒ¼ã‚ƒ\ç¨ƒ‡é¡                                                       
    63  |    //                                                                               
    64  |    /*----------------------------------------------------------------------------*/ 
    65  |    //  1.æ—Eæœƒƒèªå                                                             
    66  |    //                                                                               
    67  |    //  2.æ¦‚èƒ’                                                                    
    68  |    //    å¤‰æ•°ãƒ‡ãƒ‡ãƒ¼ã‚ƒ\ç¨ƒ‡é¡                                                
    69  |    //                                                                               
    70  |    //  3.æ©Ÿèƒ½èªƒƒæ˜                                                              
    71  |    //                                                                               
    72  |    //  4.å‚™è€ƒ                                                                     
    73  |    //                                                                               
    74  |    /*----------------------------------------------------------------------------*/ 
        |  +----------------------+ 
    75  +--+ enum Enum_DataType{  | 
        |  +--+-------------------+ 
    76  |     +--- dt_Int,
    77  |     |    dt_Real,                           
    78  |     |    dt_Char,                           
    79  |     |    dt_Logic,                          
    80  |     |    dt_Complex,                        
    81  |     |    dt_Float,   // Add 2011/07/27      
    82  |     |    dt_Void,    // Add 2012/02/23      
    83  |     |                                       
    84  |     |    dt_IntFunc,                        
    85  |     |    dt_RealFunc,                       
    86  |     |    dt_CharFunc,                       
    87  |     |    dt_LogicFunc,                      
    88  |     |    dt_ComplexFunc,                    
    89  |     |    dt_FloatFunc,   // Add 2011/07/27  
    90  |     |    dt_VoidFunc,    // Add 2012/02/23  
        |   +-+---+ 
    91  |   |  }; | 
        |   +-----+ 
    92  +--- /*----------------------------------------------------------------------------*/
    93  |    //  1.æ—Eæœƒƒèªå                                                                                                             
    94  |    //                                                                                                                               
    95  |    //  2.æ¦‚èƒ’                                                                                                                    
    96  |    //    Fortranå¤‰æ•°ã‚ƒbãƒƒDã‚ƒP                                                                                                  
    97  |    //    æ–[ã—ã„å¤‰æ•°ãŒã‚½ãƒƒVã‚ƒPå†…ã«è¦‹ã¤ã‹ã‚‹ã”ã¨ä½œæˆã•ã‚Œã‚‹ã€‚åŒã˜ãƒ¢ã‚ƒNãƒEãƒƒVãƒƒHãƒ‡åŒã˜å¤‰æ•°ãƒbåŒ   
    98  |    //    ã˜æ‰±ã„ã¨ãƒFã‚‹ã€‚                                                                                                     
    99  |    //    å¤‰æ•°ãƒ‡ãƒ¼ã‚ƒ\å†…ã«ãƒbã€ïƒVAï¼ƒbå¤‰æ•°ã‹ã©ã†ã‹ã‚„ã€å‚ç…ƒ@å›æ•°ãƒFãƒDãƒ‡æƒ…å ƒAã‚‚æ ƒVç´ã•ã‚Œã‚‹ã€‚       
   100  |    //                                                                                                                               
   101  |    //  3.æ©Ÿèƒ½èªƒƒæ˜                                                                                                              
   102  |    //                                                                                                                               
   103  |    //  4.å‚™è€ƒ                                                                                                                     
   104  |    //                                                                                                                               
   105  |    /*----------------------------------------------------------------------------*/                                                 
        |  +------------------+ 
   106  +--+ class TValData{  | 
        |  +--+---------------+ 
   107  |     |    
        |     +-----------+ 
   108  |     |  public:  | 
        |     +-----------+ 
   109  |     +--- string Str;                     // å¤‰æ•°å
   110  |     |                                                 
   111  |     +--- bool ParamValF;                 // å®šæ•° PARAMETER ãƒ‡å®šçƒZƒDå¤‰æ•°ãƒ@ã‚ã‚‹ã“ã¨ã‚’
   112  |     |                                    // ç¤ƒRã™ã€‚                                              
   113  |     |                                    // ãŸã ã—ã€int,real ä»Eå¤–ã¯ã€åƒ‡šæ•°ãƒBã—ã¦ãƒb 
   114  |     |                                    // æ‰ƒAã‚ã‚ŒãƒFã„ã€‚                                    
   115  |     |                                                                                               
   116  |     +--- bool ArrayOrFuncF;              // å¤‰æ•°åã®ç›ƒGå¾Œã«ï¼ˆãŒã‚ã£ãŸå ƒGåˆã«ã‚ƒTãƒƒãƒˆ
   117  |     |                                    // ã•ã‚Œã‚‹ã€‚                                              
   118  |     +--- bool ArgF;                      // SUBRUTION,FUNCTIONãƒ‡å¼•æ•°ãƒBã—ã¦ä½ƒ\ç”ƒBã•
   119  |     |                                    // ã‚Œã¦ã„ã‚‹ã€‚                                   
   120  |     |                                                                                         
   121  |     +--- int ModuleIdx;                  // ãƒuã‚ƒNãƒEãƒƒVãƒƒHï¼ƒDï½„ïƒX˜ (endãƒ@++)ã€€ã‚ƒPã‚ƒEãƒƒVãƒ—
   122  |     |                                    // ç¯„å›²                                                        
   123  |     +--- int BrNestLevel;                // {} () ãƒ‡ãƒƒƒãƒ™ãƒ«ã‚[ãƒƒ…ãƒƒVãƒãƒ«ã‹ã©ã†ã‹ãƒ‡åˆAå®šã«ä½ƒ\ç”ƒBã€‚
   124  |     |                                                                                                                   
   125  |     +--- Enum_DataType DataType;         // int,realãƒFãƒDãƒ‡ãƒ‡ãƒ¼ã‚ƒ\ç¨ƒ‡åˆE
   126  |     +--- int DataLength;                 // real*8 ãƒFãƒDãƒ‡ãƒ‡ãƒ¼ã‚ƒ\é•ƒLã‚’çAƒRã™ã€‚åˆ¥å®šçƒZƒDæ™‚
   127  |     |                                    // ãƒHå¿…èƒ’                                                   
   128  |     |                                                                                                     
   129  |     +--- string DefStr1;                 // &quot;double **&quot; ç­‰ã® double å®šçƒZƒDéƒƒBåˆ†ã®æ–‡åƒ…—åˆ—ã€‚
   130  |     +--- string DefStr2;                 // &quot;double **&quot; ç­‰ã® ** å®šçƒZƒDéƒƒBåˆ†ã®æ–‡åƒ…—åˆ—ã€‚
   131  |     |                                                                                             
   132  |     +--- int DefPosS;                    // real*8 ãƒFãƒDãƒ‡ å®šçƒZƒDéƒƒBåˆ†ã®TokenPosãƒFãƒD
   133  |     |                                    // ãƒ‡ç¯„å›²                                              
   134  |     +--- int DefPosE;                    // real*8 ãƒFãƒDãƒ‡ å®šçƒZƒDéƒƒBåˆ†ã®TokenPosãƒFãƒD
   135  |     |                                    // ãƒ‡ç¯„å›²                                              
   136  |     |                                                                                               
   137  |     +--- int DefPos;                     // æœ€åˆã«å®šçƒZƒDãƒ@å‡ƒRçƒZã—ãŸPos
   138  |     +--- int ArrayDefPosS;               // Arrayå®šçƒZƒDæ™‚ã®TokenPos (N,N) ãƒFãƒDãƒ‡ç¯„
   139  |     |                                    // å›ƒC                                              
   140  |     +--- int ArrayDefPosE;               // Arrayå®šçƒZƒDæ™‚ã®TokenPos (N,N) ãƒFãƒDãƒ‡ç¯„
   141  |     |                                    // å›ƒC                                              
   142  |     +--- int RefCount;                   // å¤‰æ•°å‚ç…§Count
   143  |     +--- int SetCount;                   // å¤‰æ•°è¨ƒ…å®šCount
   144  |     |                                                           
   145  |     +--- double dData;                   // å®šæ•°ãƒ‡å ƒGåˆã®å€A
   146  |     +--- int ArrayLevel ;                // é…åˆ—æ¬Bå…ƒæ•°
   147  |     |                                                         
   148  |     +--- int ArrayStart[ARRAY_MAX];      // é…åˆ—è¦çƒG é–‹åƒ@‹ç•ªåƒLãƒƒFã‚ƒPãƒˆ -1ãƒbæœƒFå®š
   149  |     +--- int ArrayCount[ARRAY_MAX];      // é…åˆ—è¦çƒG æ•[ãƒƒFã‚ƒPãƒˆ -1ãƒbæœƒFå®š
   150  |     |                                                                                   
   151  |     +--- // UnRollæ™‚ã«ä¸€æ™‚çš„ãƒHä½ƒ\ç”ƒBã•ã‚Œã‚‹ã€‚
   152  |     |    // è¤‡æ•°ãƒ‡Do(DoValCount)ãƒHå¯ƒZå¿œã™ã‚‹ãŸã‚ã«ã€bitãƒHä¿ƒ‡æ­v 2004/3/13  
   153  |     |    // RefDoValBitsãƒbã€èA‡æ•°ãƒ‡BitãŒïƒV‘ã«ãƒFã‚‹å ƒGåˆã‚‚ã‚ã‚‹ã€‚           
   154  |     |    //                                                                                 
   155  |     +--- unsigned int DoValBits;         // Doå¤‰æ•°è‡ƒFèºƒHã‹ã©ã†ã‹ã€‚
   156  |     +--- unsigned int RefDoValBits;      // Doå¤‰æ•°ä¾åƒ…˜ã‹ãƒDã†ã‹ã€‚
   157  |     +--- unsigned int DoEndValBits;      // UnRollãƒ‡Doãƒ‡çµ‚ã‚ã‚Šå€Aãƒ‡å¤‰æ•°ï¼ˆåƒVã¯ï¼ƒ‡ï¼ƒ@ï¼‰
   158  |     |                                                                                                     
   159  |     +--- TValData(string aStr);          // ç”Ÿæˆ
   160  |     +--- ~TValData();                    // ç ƒGæ£„
   161  |     |                                               
   162  |     +--- string ToString();              // æ–‡åƒ…—åˆ—ãƒ@æƒ…å ƒAã‚’æ‰€å¾—
   163  |     +--- string GetDefStr_C();
   164  |     +--- string GetDefStr_Fortran();
   165  |     |    
        |   +-+---+ 
   166  |   |  }; | 
        |   +-----+ 
   167  |    
   168  +--- #endif
</pre>


</body>
</html>

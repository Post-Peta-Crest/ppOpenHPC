
<html>
<head>
<title>MakeArgValList メンバ関数説明</title><base target="main">
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="stylesheet">
<meta http-equiv="Content-Type" content="text/html;charset=Shift_JIS">
</head>

<body bgcolor="#ffffff">

<div align="right"><font size="2">ABCLibScriptC プロジェクト</font></div>

<table width=100% bgcolor="#e6e6fa" class="titlebgcolor" border="1" cellpadding="7" cellspacing="0">
<tr>
    <td><font class="titlefont">14.10.25. MakeArgValList メンバ関数説明</font></td>
</tr>
</table>

<p></p>
<table border="1">
<tr><th align="left" nowrap>メンバ関数名</th>  <td nowrap>MakeArgValList</td></tr>
<tr><th align="left" nowrap>定義ファイル名</th><td nowrap>TuneRegion.cpp</td></tr>
<tr><th align="left" nowrap>定義行</th>        <td nowrap>726</td></tr>
<tr><th align="left" nowrap>所属名</th>        <td nowrap>TTuneRegion</td></tr>
<tr><th align="left" nowrap>アクセス属性</th>  <td nowrap>private</td></tr>
<tr><th align="left" nowrap>宣言形式</th>      <td nowrap>void MakeArgValList ( )</td></tr>
<tr><th align="left" nowrap>概要</th>          <td nowrap>チューニングリージョンのサブルーチンに渡す引数リストを生成する。<br>チューニングリージョン外との連携が必要な変数の一覧を作成する。<br>チューニングリージョン内で最初に参照、チューニングリージョン外で後で参照(S<br>UBROTIONの引数を含む）をチェックする。<br><br>TokenEndPosの後までチェック（tid_end)して、参照があるかチェックする。<br><br>DefPosS == -1 の外部定義（グローバル）変数は引数に追加しない形とした。</td></tr>
<tr><th align="left" nowrap>戻り値</th>        <td nowrap></td></tr>
<tr><th align="left" nowrap>パラメタ説明</th>  <td nowrap></td></tr>
<tr><th align="left" nowrap>機能説明</th>      <td nowrap></td></tr>
<tr><th align="left" nowrap>備考</th>          <td nowrap></td></tr>
</table>

<p></p>
呼出し元関数一覧表
<table border="1">
<tr>
<th nowrap>№</th>
<th nowrap>名称</th>
<th nowrap>定義ファイル名</th>
<th nowrap>定義行</th>
</tr>
<tr>
<td nowrap>1</td>
<td nowrap><a href="16_10_26.htm">TTuneRegion::MakeLoopFusionSplitData</a></td>
<td nowrap><a href="5_7.htm">TuneRegion.cpp</a></td>
<td nowrap><a href="16_10_26.htm">1313</a></td>
</tr>
<tr>
<td nowrap>2</td>
<td nowrap><a href="16_10_28.htm">TTuneRegion::MakeSelectData</a></td>
<td nowrap><a href="5_7.htm">TuneRegion.cpp</a></td>
<td nowrap><a href="16_10_28.htm">308</a></td>
</tr>
<tr>
<td nowrap>3</td>
<td nowrap><a href="16_10_29.htm">TTuneRegion::MakeUnrollData</a></td>
<td nowrap><a href="5_7.htm">TuneRegion.cpp</a></td>
<td nowrap><a href="16_10_29.htm">1001</a></td>
</tr>
</table>

<p></p>
呼出し先関数一覧表
<table border="1">
<tr>
<th nowrap>№</th>
<th nowrap>名称</th>
<th nowrap>定義ファイル名</th>
<th nowrap>定義行</th>
</tr>
<tr>
<td nowrap>1</td>
<td nowrap>TList::Add</td>
<td nowrap><a href="5_16.htm">VCL_Lib.h</a></td>
<td nowrap>64</td>
</tr>
<tr>
<td nowrap>2</td>
<td nowrap>TStringList::AddObject</td>
<td nowrap><a href="5_16.htm">VCL_Lib.h</a></td>
<td nowrap>84</td>
</tr>
<tr>
<td nowrap>3</td>
<td nowrap>TStringList::Delete</td>
<td nowrap><a href="5_16.htm">VCL_Lib.h</a></td>
<td nowrap>85</td>
</tr>
<tr>
<td nowrap>4</td>
<td nowrap>TList::IndexOf</td>
<td nowrap><a href="5_16.htm">VCL_Lib.h</a></td>
<td nowrap>68</td>
</tr>
<tr>
<td nowrap>5</td>
<td nowrap>TStringList::IndexOfObject</td>
<td nowrap><a href="5_16.htm">VCL_Lib.h</a></td>
<td nowrap>89</td>
</tr>
<tr>
<td nowrap>6</td>
<td nowrap>TStringList::InsertObject</td>
<td nowrap><a href="5_16.htm">VCL_Lib.h</a></td>
<td nowrap>97</td>
</tr>
<tr>
<td nowrap>7</td>
<td nowrap>LowerCase</td>
<td nowrap><a href="5_16.htm">VCL_Lib.h</a></td>
<td nowrap>109</td>
</tr>
</table>

<p></p>
参照外部変数一覧表
<table border="1">
<tr>
<th nowrap>№</th>
<th nowrap>名称</th>
<th nowrap>定義ファイル名</th>
<th nowrap>定義行</th>
</tr>
<tr>
<td nowrap>1</td>
<td nowrap>MainF</td>
<td nowrap><a href="5_1.htm">main.cpp</a></td>
<td nowrap>53</td>
</tr>
</table>

<p></p>
参照メンバ変数一覧表
<table border="1">
<tr>
<th nowrap>№</th>
<th nowrap>名称</th>
<th nowrap>定義ファイル名</th>
<th nowrap>定義行</th>
</tr>
<tr>
<td nowrap>1</td>
<td nowrap>TTuneRegion::ArgValList</td>
<td nowrap><a href="5_15.htm">TuneRegion.h</a></td>
<td nowrap>207</td>
</tr>
<tr>
<td nowrap>2</td>
<td nowrap>TTuneRegion::TokenEndPos</td>
<td nowrap><a href="5_15.htm">TuneRegion.h</a></td>
<td nowrap>190</td>
</tr>
<tr>
<td nowrap>3</td>
<td nowrap>TTuneRegion::TokenList</td>
<td nowrap><a href="5_15.htm">TuneRegion.h</a></td>
<td nowrap>187</td>
</tr>
<tr>
<td nowrap>4</td>
<td nowrap>TTuneRegion::TokenStartPos</td>
<td nowrap><a href="5_15.htm">TuneRegion.h</a></td>
<td nowrap>189</td>
</tr>
<tr>
<td nowrap>5</td>
<td nowrap>TTuneRegion::UndefinedArgValList</td>
<td nowrap><a href="5_15.htm">TuneRegion.h</a></td>
<td nowrap>208</td>
</tr>
</table>

<p></p>
参照先一覧表
<table border="1">
<tr>
<th nowrap>№</th>
<th nowrap>名称</th>
<th nowrap>種別</th>
<th nowrap>定義ファイル名</th>
<th nowrap>定義行</th>
</tr>
<tr>
<td nowrap>1</td>
<td nowrap><a href="16_9_1.htm">TToken</a></td>
<td nowrap>クラス</td>
<td nowrap><a href="5_10.htm">pass1.h</a></td>
<td nowrap><a href="16_9_1.htm">294</a></td>
</tr>
<tr>
<td nowrap>2</td>
<td nowrap><a href="16_11_1.htm">TValData</a></td>
<td nowrap>クラス</td>
<td nowrap><a href="5_11.htm">pass2.h</a></td>
<td nowrap><a href="16_11_1.htm">106</a></td>
</tr>
</table>

<p></p>
<pre>
関数論理チャート

        |  +------------------------------------+ 
   726  +--+ void TTuneRegion::MakeArgValList() | 
   727     | {                                  | 
           +--+---------------------------------+ 
   728        +--- int i,Idx,j;
   729        +--- TToken *Token,*Token2;
   730        +--- TValData *ValData,*ValData2;
   731        +--- string s;
   732        +--- int DefValInsertIdx;    // 配列等の定義に使用される引数は前に持って来る。
   733        |                                                                               
              |  +--------------------------------------------------+ 
   734        +--+ for(i = TokenStartPos ; i &lt;= TokenEndPos ; i++){ | 
              |  +--+-----------------------------------------------+ 
   735        |     +--- Token = (TToken *)TokenList-&gt;Items[i];
              |     |  +------------------------------+ 
   736        |     +--+ if(Token-&gt;ValData != NULL){  | 
              |     |  +--+---------------------------+ 
   737        |     |     +--- ValData = (TValData *)Token-&gt;ValData;
              |     |     |  +--------------------------------------------------+ 
   738        |     |     +--+ if(ValData-&gt;DefPosS == -1){     //  未定義の変数 | 
              |     |     |  +--+-----------------------------------------------+ 
   739        |     |     |     +--- //              DP(ValData-&gt;Str);
              |     |     |     |  +--------------------------------------------------+ 
   740        |     |     |     +--+ if(UndefinedArgValList-&gt;IndexOf(ValData) == -1){ | 
              |     |     |     |  +--+-----------------------------------------------+ 
   741        |     |     |     |     +--- UndefinedArgValList-&gt;Add(ValData);
              |     |     |     |   +-+---+ 
   742        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
              |     |     |     |  +----------------------------------------------------------------+ 
   743        |     |     |     +--+ continue;   // 定義なしは、対象外。 モジュールやグローバル変数 | 
              |     |     |     |  +----------------------------------------------------------------+ 
              |     |     |   +-+---+ 
   744        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |     |  +----------------------------------------------------------+ 
   745        |     |     +--+ if(ValData-&gt;ArrayOrFuncF &amp;&amp; (ValData-&gt;ArrayLevel == 0)){ | 
              |     |     |  +--+-------------------------------------------------------+ 
              |     |     |     |  +------------------------------------------------+ 
   746        |     |     |     +--+ continue;                   // 関数は、対象外  | 
              |     |     |     |  +------------------------------------------------+ 
              |     |     |   +-+---+ 
   747        |     |     |   |  }  | 
              |     |     |   +-----+ 
   748        |     |     +--- Token2 = (TToken *)TokenList-&gt;Items[i+1];
              |     |     |  +----------------------------------+ 
   749        |     |     +--+ if(Token2-&gt;TokId == tid_Kakko){  | 
              |     |     |  +--+-------------------------------+ 
              |     |     |     |  +--------------------------------+ 
   750        |     |     |     +--+ if(ValData-&gt;ArrayLevel == 0){  | 
              |     |     |     |  +--+-----------------------------+ 
   751        |     |     |     |     +--- // 配列定義なしでのValName( 呼び出しも対象外
              |     |     |     |     |  +------------+ 
   752        |     |     |     |     +--+ continue;  | 
              |     |     |     |     |  +------------+ 
              |     |     |     |   +-+---+ 
   753        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
              |     |     |   +-+---+ 
   754        |     |     |   |  }  | 
              |     |     |   +-----+ 
   755        |     |     +--- // 名前の一致で判定。
              |     |     |  +----------------------------------------+ 
   756        |     |     +--+ if(MainF-&gt;SrcCodeType != MainF-&gt;sctC){ | 
              |     |     |  +--+-------------------------------------+ 
              |     |     |     |  +--------------------------------------------+ 
   757        |     |     |     +--+ for(j = 0 ; j &lt; ArgValList-&gt;Count ; j++){  | 
              |     |     |     |  +--+-----------------------------------------+ 
   758        |     |     |     |     +--- ValData2 = (TValData *)ArgValList-&gt;Objects[j];
              |     |     |     |     |  +----------------------------------------------------------+ 
   759        |     |     |     |     +--+ if(LowerCase(ValData-&gt;Str) == LowerCase(ValData2-&gt;Str)){ | 
              |     |     |     |     |  +--+-------------------------------------------------------+ 
              |     |     |     |     |     |  +--------+ 
   760        |     |     |     |     |     +--+ break; | 
              |     |     |     |     |     |  +--------+ 
              |     |     |     |     |   +-+---+ 
   761        |     |     |     |     |   |  }  | 
              |     |     |     |     |   +-----+ 
              |     |     |     |   +-+---+ 
   762        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
              |     |     |   +-+---+ 
   763        |     |     |   |  }  | 
              |     |     |   +-+---+ 
              |     |     |   +-+-------+ 
   763        |     |     |   |  else{  | 
              |     |     |   +-+-------+ 
              |     |     |     |  +--------------------------------------------+ 
   764        |     |     |     +--+ for(j = 0 ; j &lt; ArgValList-&gt;Count ; j++){  | 
              |     |     |     |  +--+-----------------------------------------+ 
   765        |     |     |     |     +--- ValData2 = (TValData *)ArgValList-&gt;Objects[j];
              |     |     |     |     |  +------------------------------------+ 
   766        |     |     |     |     +--+ if(ValData-&gt;Str == ValData2-&gt;Str){ | 
              |     |     |     |     |  +--+---------------------------------+ 
              |     |     |     |     |     |  +--------+ 
   767        |     |     |     |     |     +--+ break; | 
              |     |     |     |     |     |  +--------+ 
              |     |     |     |     |   +-+---+ 
   768        |     |     |     |     |   |  }  | 
              |     |     |     |     |   +-----+ 
              |     |     |     |   +-+---+ 
   769        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
              |     |     |   +-+---+ 
   770        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |     |  +----------------------------+ 
   771        |     |     +--+ if(j &lt; ArgValList-&gt;Count){ | 
              |     |     |  +--+-------------------------+ 
              |     |     |     |  +----------------------+ 
   772        |     |     |     +--+ continue; // 追加済  | 
              |     |     |     |  +----------------------+ 
              |     |     |   +-+---+ 
   773        |     |     |   |  }  | 
              |     |     |   +-----+ 
   774        |     |     +--- //          MainF-&gt;print(Token-&gt;Str);
              |     |     |  +----------------------------------------------------------------+ 
   775        |     |     +--+ if(ValData-&gt;ArgF){  // サブルーチンの引数は、常に対象とする。  | 
              |     |     |  +--+-------------------------------------------------------------+ 
   776        |     |     |     +--- ArgValList-&gt;AddObject(ValData-&gt;Str,(void *)ValData);
              |     |     |   +-+---+ 
   777        |     |     |   |  }  | 
              |     |     |   +-+---+ 
              |     |     |   +-+-----------------------------------------------------------------------+ 
   777        |     |     |   |  else if((Token-&gt;RefType == vrf_ref)||(Token-&gt;RefType == vrf_refset)){  | 
              |     |     |   +-+-----------------------------------------------------------------------+ 
   778        |     |     |     +--- // 最初に参照で使用されている変数
   779        |     |     |     +--- ArgValList-&gt;AddObject(ValData-&gt;Str,(void *)ValData);
              |     |     |   +-+---+ 
   780        |     |     |   |  }  | 
              |     |     |   +-+---+ 
              |     |     |   +-+-------------------------------------+ 
   780        |     |     |   |  else if(Token-&gt;RefType == vrf_set){  | 
              |     |     |   +-+-------------------------------------+ 
   781        |     |     |     +--- // 最初に代入で使用されている変数（ＴＲ外での参照がなければ不要)
   782        |     |     |     +--- ArgValList-&gt;AddObject(&quot;*&quot;,(void *)ValData);
              |     |     |   +-+---+ 
   783        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |   +-+---+ 
   784        |     |   |  }  | 
              |     |   +-----+ 
              |   +-+---+ 
   785        |   |  }  | 
              |   +-----+ 
   786        +--- #if 1
   787        +--- //
   788        |    //  引数リストの変数が配列で、その定義に変数を参照(Exp: Real D(1:nx))の場合  
   789        |    //  その変数も、引数リストに追加する。 Add 2007/1/20                         
   790        |    //  これは、最初に代入で使用される変数も対象となる。                         
   791        |    //                                                                           
   792        +--- DefValInsertIdx = 0;    // 配列等の定義に使用される引数は前に持って来る。
              |  +--------------------------------------------+ 
   793        +--+ for(i = 0 ; i &lt; ArgValList-&gt;Count ; i++){  | 
              |  +--+-----------------------------------------+ 
              |     |  +------------------------------------+ 
   794        |     +--+ if(ArgValList-&gt;Strings[i] == &quot;&quot;){  | 
              |     |  +--+---------------------------------+ 
              |     |     |  +------------+ 
   795        |     |     +--+ continue;  | 
              |     |     |  +------------+ 
              |     |   +-+---+ 
   796        |     |   |  }  | 
              |     |   +-----+ 
   797        |     +--- ValData = (TValData *)ArgValList-&gt;Objects[i];
              |     |  +------------------------------------------------------------+ 
   798        |     +--+ if(!ValData-&gt;ArrayOrFuncF || (ValData-&gt;ArrayLevel == 0)){  | 
              |     |  +--+---------------------------------------------------------+ 
              |     |     |  +----------------------------------+ 
   799        |     |     +--+ continue; // 配列以外は、対象外  | 
              |     |     |  +----------------------------------+ 
              |     |   +-+---+ 
   800        |     |   |  }  | 
              |     |   +-----+ 
              |     |  +------------------------------------------------+ 
   801        |     +--+ if(MainF-&gt;SrcCodeType == MainF-&gt;sctFortran90){ | 
              |     |  +--+---------------------------------------------+ 
   802        |     |     +--- //
   803        |     |     |    //  配列等の定義に使われる変数を先に持って来る。 
   804        |     |     |    //                                               
              |     |     |  +----------------------------------------------------------+ 
   805        |     |     +--+ for(j = ValData-&gt;DefPosS ; j &lt; ValData-&gt;DefPosE ; j++){  | 
              |     |     |  +--+-------------------------------------------------------+ 
   806        |     |     |     +--- Token = (TToken *)TokenList-&gt;Items[j];
   807        |     |     |     +--- ValData2 = (TValData *)Token-&gt;ValData;
              |     |     |     |  +------------------------+ 
   808        |     |     |     +--+ if(ValData2 == NULL){  | 
              |     |     |     |  +--+---------------------+ 
              |     |     |     |     |  +------------------------------------+ 
   809        |     |     |     |     +--+ continue;   // 変数以外のトークン  | 
              |     |     |     |     |  +------------------------------------+ 
              |     |     |     |   +-+---+ 
   810        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
   811        |     |     |     +--- Idx = ArgValList-&gt;IndexOfObject((void *)ValData2);
              |     |     |     |  +--------------------------+ 
   812        |     |     |     +--+ if(Idx != -1){ // 追加済 | 
              |     |     |     |  +--+-----------------------+ 
              |     |     |     |     |  +------------------------------+ 
   813        |     |     |     |     +--+ if(Idx &lt;= DefValInsertIdx){  | 
              |     |     |     |     |  +--+---------------------------+ 
              |     |     |     |     |     |  +------------+ 
   814        |     |     |     |     |     +--+ continue;  | 
              |     |     |     |     |     |  +------------+ 
              |     |     |     |     |   +-+---+ 
   815        |     |     |     |     |   |  }  | 
              |     |     |     |     |   +-----+ 
   816        |     |     |     |     +--- ArgValList-&gt;Delete(Idx);
              |     |     |     |   +-+---+ 
   817        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
   818        |     |     |     +--- ArgValList-&gt;InsertObject(DefValInsertIdx,ValData2-&gt;Str,(void *)ValData2);
   819        |     |     |     +--- DefValInsertIdx++;
              |     |     |   +-+---+ 
   820        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |     |  +--------------------------------------------------------------------+ 
   821        |     |     +--+ for(j = ValData-&gt;ArrayDefPosS ; j &lt; ValData-&gt;ArrayDefPosE ; j++){  | 
              |     |     |  +--+-----------------------------------------------------------------+ 
   822        |     |     |     +--- Token = (TToken *)TokenList-&gt;Items[j];
   823        |     |     |     +--- ValData2 = (TValData *)Token-&gt;ValData;
              |     |     |     |  +------------------------+ 
   824        |     |     |     +--+ if(ValData2 == NULL){  | 
              |     |     |     |  +--+---------------------+ 
              |     |     |     |     |  +------------------------------------+ 
   825        |     |     |     |     +--+ continue;   // 変数以外のトークン  | 
              |     |     |     |     |  +------------------------------------+ 
              |     |     |     |   +-+---+ 
   826        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
   827        |     |     |     +--- Idx = ArgValList-&gt;IndexOfObject((void *)ValData2);
              |     |     |     |  +--------------------------+ 
   828        |     |     |     +--+ if(Idx != -1){ // 追加済 | 
              |     |     |     |  +--+-----------------------+ 
              |     |     |     |     |  +------------------------------+ 
   829        |     |     |     |     +--+ if(Idx &lt;= DefValInsertIdx){  | 
              |     |     |     |     |  +--+---------------------------+ 
              |     |     |     |     |     |  +------------+ 
   830        |     |     |     |     |     +--+ continue;  | 
              |     |     |     |     |     |  +------------+ 
              |     |     |     |     |   +-+---+ 
   831        |     |     |     |     |   |  }  | 
              |     |     |     |     |   +-----+ 
   832        |     |     |     |     +--- ArgValList-&gt;Delete(Idx);
              |     |     |     |   +-+---+ 
   833        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
   834        |     |     |     +--- ArgValList-&gt;InsertObject(DefValInsertIdx,ValData2-&gt;Str,(void *)ValData2);
   835        |     |     |     +--- DefValInsertIdx++;
              |     |     |   +-+---+ 
   836        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |   +-+---+ 
   837        |     |   |  }  | 
              |     |   +-+---+ 
              |     |   +-+-------+ 
   837        |     |   |  else{  | 
              |     |   +-+-------+ 
              |     |     |  +----------------------------------------------------------+ 
   838        |     |     +--+ for(j = ValData-&gt;DefPosS ; j &lt; ValData-&gt;DefPosE ; j++){  | 
              |     |     |  +--+-------------------------------------------------------+ 
   839        |     |     |     +--- Token = (TToken *)TokenList-&gt;Items[j];
   840        |     |     |     +--- ValData2 = (TValData *)Token-&gt;ValData;
              |     |     |     |  +------------------------+ 
   841        |     |     |     +--+ if(ValData2 == NULL){  | 
              |     |     |     |  +--+---------------------+ 
              |     |     |     |     |  +------------------------------------+ 
   842        |     |     |     |     +--+ continue;   // 変数以外のトークン  | 
              |     |     |     |     |  +------------------------------------+ 
              |     |     |     |   +-+---+ 
   843        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
   844        |     |     |     +--- Idx = ArgValList-&gt;IndexOfObject((void *)ValData2);
              |     |     |     |  +--------------------------+ 
   845        |     |     |     +--+ if(Idx != -1){ // 追加済 | 
              |     |     |     |  +--+-----------------------+ 
              |     |     |     |     |  +------------+ 
   846        |     |     |     |     +--+ continue;  | 
              |     |     |     |     |  +------------+ 
              |     |     |     |   +-+---+ 
   847        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
   848        |     |     |     +--- ArgValList-&gt;AddObject(ValData2-&gt;Str,(void *)ValData2);
              |     |     |   +-+---+ 
   849        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |     |  +--------------------------------------------------------------------+ 
   850        |     |     +--+ for(j = ValData-&gt;ArrayDefPosS ; j &lt; ValData-&gt;ArrayDefPosE ; j++){  | 
              |     |     |  +--+-----------------------------------------------------------------+ 
   851        |     |     |     +--- Token = (TToken *)TokenList-&gt;Items[j];
   852        |     |     |     +--- ValData2 = (TValData *)Token-&gt;ValData;
              |     |     |     |  +------------------------+ 
   853        |     |     |     +--+ if(ValData2 == NULL){  | 
              |     |     |     |  +--+---------------------+ 
              |     |     |     |     |  +------------------------------------+ 
   854        |     |     |     |     +--+ continue;   // 変数以外のトークン  | 
              |     |     |     |     |  +------------------------------------+ 
              |     |     |     |   +-+---+ 
   855        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
   856        |     |     |     +--- Idx = ArgValList-&gt;IndexOfObject((void *)ValData2);
              |     |     |     |  +--------------------------+ 
   857        |     |     |     +--+ if(Idx != -1){ // 追加済 | 
              |     |     |     |  +--+-----------------------+ 
              |     |     |     |     |  +------------+ 
   858        |     |     |     |     +--+ continue;  | 
              |     |     |     |     |  +------------+ 
              |     |     |     |   +-+---+ 
   859        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
   860        |     |     |     +--- ArgValList-&gt;AddObject(ValData2-&gt;Str,(void *)ValData2);
              |     |     |   +-+---+ 
   861        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |   +-+---+ 
   862        |     |   |  }  | 
              |     |   +-----+ 
              |   +-+---+ 
   863        |   |  }  | 
              |   +-----+ 
   864        +--- #endif
   865        +--- //
   866        |    // ENDまで検索して、参照があるかを調べる。                       
   867        |    // リージョン内で Sum = 0 ... Loop外で参照なら Sumは引数になる。 
   868        |    //                                                               
   869        +--- #if 1
              |  +----------------------------------------------------+ 
   870        +--+ for(i = TokenEndPos ; i &lt; TokenList-&gt;Count ; i++){ | 
              |  +--+-------------------------------------------------+ 
   871        |     +--- Token = (TToken *)TokenList-&gt;Items[i];
   872        |     |    
   873        |     +--- /****************************************************************************************************/
   874        |     |    //                                                                                                     
   875        |     |    //Kogakuin Irie                                                                                        
   876        |     |    //チューニング領域が複数あるときの対処                                                                 
   877        |     |    //2つ目以降のチューニング領域内は，検索対象外とする                                                    
   878        |     |    //                                                                                                     
   879        |     |    /*-----------------------------------------------*/                                                    
   880        |     |    //region start の文字列を探す処理                                                                      
              |     |  +------------------------------+ 
   881        |     +--+ if(Token-&gt;Str == &quot;region&quot;){  | 
              |     |  +--+---------------------------+ 
   882        |     |     +--- Token2 = (TToken *)TokenList-&gt;Items[++i];
              |     |     |  +------------------------------+ 
   883        |     |     +--+ if(Token2-&gt;Str == &quot;start&quot;){  | 
              |     |     |  +--+---------------------------+ 
   884        |     |     |     +--- /*-----------------------------------------------*/
   885        |     |     |     +--- /*--------------------------------------------------------------------------------*/
   886        |     |     |     |    //対応する region end を探す処理                                                     
              |     |     |     |  +------------------------+ 
   887        |     |     |     +--+ for(j = ++i ; ; j++){  | 
              |     |     |     |  +--+---------------------+ 
   888        |     |     |     |     +--- Token2 = (TToken *)TokenList-&gt;Items[j];
              |     |     |     |     |  +------------------------------+ 
   889        |     |     |     |     +--+ if(Token2-&gt;Str == &quot;region&quot;){ | 
              |     |     |     |     |  +--+---------------------------+ 
   890        |     |     |     |     |     +--- Token2 = (TToken *)TokenList-&gt;Items[++j];
              |     |     |     |     |     |  +----------------------------+ 
   891        |     |     |     |     |     +--+ if(Token2-&gt;Str == &quot;end&quot;){  | 
              |     |     |     |     |     |  +--+-------------------------+ 
   892        |     |     |     |     |     |     +--- //end の次のトークンを取得し，参照の有無を調べる処理に戻る
   893        |     |     |     |     |     |     +--- i=++j;
   894        |     |     |     |     |     |     +--- Token = (TToken *)TokenList-&gt;Items[i];
              |     |     |     |     |     |     |  +--------+ 
   895        |     |     |     |     |     |     +--+ break; | 
              |     |     |     |     |     |     |  +--------+ 
              |     |     |     |     |     |   +-+---+ 
   896        |     |     |     |     |     |   |  }  | 
              |     |     |     |     |     |   +-----+ 
              |     |     |     |     |   +-+---+ 
   897        |     |     |     |     |   |  }  | 
              |     |     |     |     |   +-----+ 
              |     |     |     |   +-+---+ 
   898        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
   899        |     |     |     +--- /*--------------------------------------------------------------------------------*/
              |     |     |   +-+---+ 
   900        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |   +-+---+ 
   901        |     |   |  }  | 
              |     |   +-----+ 
   902        |     +--- /****************************************************************************************************/
   903        |     |                                                                                                           
              |     |  +----------------------------+ 
   904        |     +--+ if(Token-&gt;NestLevel == 0){ | 
              |     |  +--+-------------------------+ 
              |     |     |  +--------+ 
   905        |     |     +--+ break; | 
              |     |     |  +--------+ 
              |     |   +-+---+ 
   906        |     |   |  }  | 
              |     |   +-----+ 
              |     |  +------------------------------+ 
   907        |     +--+ if(Token-&gt;ValData != NULL){  | 
              |     |  +--+---------------------------+ 
   908        |     |     +--- ValData = (TValData *)Token-&gt;ValData;
   909        |     |     |    
   910        |     |     +--- Idx = ArgValList-&gt;IndexOfObject((void *)ValData);
              |     |     |  +----------------+ 
   911        |     |     +--+ if(Idx == -1){ | 
              |     |     |  +--+-------------+ 
              |     |     |     |  +----------------------------+ 
   912        |     |     |     +--+ continue; // 対象外の変数  | 
              |     |     |     |  +----------------------------+ 
              |     |     |   +-+---+ 
   913        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |     |  +--------------------------------------+ 
   914        |     |     +--+ if(ArgValList-&gt;Strings[Idx] == &quot;*&quot;){ | 
              |     |     |  +--+-----------------------------------+ 
              |     |     |     |  +------------------------------------------------------------------+ 
   915        |     |     |     +--+ if((Token-&gt;RefType == vrf_ref)||(Token-&gt;RefType == vrf_refset)){ | 
              |     |     |     |  +--+---------------------------------------------------------------+ 
   916        |     |     |     |     +--- ArgValList-&gt;Strings[Idx] = ValData-&gt;Str; // 使用にセット
              |     |     |     |   +-+---+ 
   917        |     |     |     |   |  }  | 
              |     |     |     |   +-+---+ 
              |     |     |     |   +-+---------------------------------------------------------+ 
   917        |     |     |     |   |  else if(Token-&gt;RefType == vrf_set){ // 最初に代入で使用  | 
              |     |     |     |   +-+---------------------------------------------------------+ 
   918        |     |     |     |     +--- ArgValList-&gt;Strings[Idx] = &quot;&quot;; // 未使用にセット
              |     |     |     |   +-+---+ 
   919        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
              |     |     |   +-+---+ 
   920        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |   +-+---+ 
   921        |     |   |  }  | 
              |     |   +-----+ 
              |   +-+---+ 
   922        |   |  }  | 
              |   +-----+ 
   923        +--- #endif
   924        +--- //
   925        |    // ArgValListの &quot;*&quot;[TR内で最初に代入で使用されて、その後参照されていない変数]  
   926        |    // を &quot;&quot; としてクリアする。                                                    
   927        |    //                                                                             
              |  +--------------------------------------------+ 
   928        +--+ for(i = 0 ; i &lt; ArgValList-&gt;Count ; i++){  | 
              |  +--+-----------------------------------------+ 
   929        |     +--- ValData = (TValData *)ArgValList-&gt;Objects[i];
   930        |     +--- //      MainF-&gt;print(&quot;Arg[&quot;+ArgValList-&gt;Strings[i]+&quot;,&quot;+ValData-&gt;Str+&quot;]&quot;);
              |     |  +------------------------------------+ 
   931        |     +--+ if(ArgValList-&gt;Strings[i] == &quot;*&quot;){ | 
              |     |  +--+---------------------------------+ 
   932        |     |     +--- ArgValList-&gt;Strings[i] = &quot;&quot;;
              |     |   +-+---+ 
   933        |     |   |  }  | 
              |     |   +-----+ 
              |   +-+---+ 
   934        |   |  }  | 
              |   +-----+ 
   935        +--- #if 0
   936        +--- //
   937        |    //  引数リストの変数が配列で、その定義に変数を参照(Exp: Real D(1:nx))の場合  
   938        |    //  その変数も、引数リストに追加する。 Add 2007/1/20                         
   939        |    //  これは、最初に代入で使用される変数も対象となる。                         
   940        |    //                                                                           
              |  +--------------------------------------------+ 
   941        +--+ for(i = 0 ; i &lt; ArgValList-&gt;Count ; i++){  | 
              |  +--+-----------------------------------------+ 
              |     |  +------------------------------------+ 
   942        |     +--+ if(ArgValList-&gt;Strings[i] == &quot;&quot;){  | 
              |     |  +--+---------------------------------+ 
              |     |     |  +------------+ 
   943        |     |     +--+ continue;  | 
              |     |     |  +------------+ 
              |     |   +-+---+ 
   944        |     |   |  }  | 
              |     |   +-----+ 
   945        |     +--- ValData = (TValData *)ArgValList-&gt;Objects[i];
              |     |  +------------------------------------------------------------+ 
   946        |     +--+ if(!ValData-&gt;ArrayOrFuncF || (ValData-&gt;ArrayLevel == 0)){  | 
              |     |  +--+---------------------------------------------------------+ 
              |     |     |  +----------------------------------+ 
   947        |     |     +--+ continue; // 配列以外は、対象外  | 
              |     |     |  +----------------------------------+ 
              |     |   +-+---+ 
   948        |     |   |  }  | 
              |     |   +-----+ 
   949        |     +--- //
   950        |     |    // 
   951        |     |    // 
              |     |  +----------------------------------------------------------+ 
   952        |     +--+ for(j = ValData-&gt;DefPosS ; j &lt; ValData-&gt;DefPosE ; j++){  | 
              |     |  +--+-------------------------------------------------------+ 
   953        |     |     +--- Token = (TToken *)TokenList-&gt;Items[j];
   954        |     |     +--- ValData2 = (TValData *)Token-&gt;ValData;
              |     |     |  +------------------------+ 
   955        |     |     +--+ if(ValData2 == NULL){  | 
              |     |     |  +--+---------------------+ 
              |     |     |     |  +------------------------------------+ 
   956        |     |     |     +--+ continue;   // 変数以外のトークン  | 
              |     |     |     |  +------------------------------------+ 
              |     |     |   +-+---+ 
   957        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |     |  +--------------------------------------------------------+ 
   958        |     |     +--+ if(ArgValList-&gt;IndexOfObject((void *)ValData2) != -1){ | 
              |     |     |  +--+-----------------------------------------------------+ 
              |     |     |     |  +------------------------+ 
   959        |     |     |     +--+ continue; // 処理済み  | 
              |     |     |     |  +------------------------+ 
              |     |     |   +-+---+ 
   960        |     |     |   |  }  | 
              |     |     |   +-----+ 
   961        |     |     +--- ArgValList-&gt;AddObject(ValData2-&gt;Str,(void *)ValData2);
              |     |   +-+---+ 
   962        |     |   |  }  | 
              |     |   +-----+ 
              |     |  +--------------------------------------------------------------------+ 
   963        |     +--+ for(j = ValData-&gt;ArrayDefPosS ; j &lt; ValData-&gt;ArrayDefPosE ; j++){  | 
              |     |  +--+-----------------------------------------------------------------+ 
   964        |     |     +--- Token = (TToken *)TokenList-&gt;Items[j];
   965        |     |     +--- ValData2 = (TValData *)Token-&gt;ValData;
              |     |     |  +------------------------+ 
   966        |     |     +--+ if(ValData2 == NULL){  | 
              |     |     |  +--+---------------------+ 
              |     |     |     |  +------------------------------------+ 
   967        |     |     |     +--+ continue;   // 変数以外のトークン  | 
              |     |     |     |  +------------------------------------+ 
              |     |     |   +-+---+ 
   968        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |     |  +--------------------------------------------------------+ 
   969        |     |     +--+ if(ArgValList-&gt;IndexOfObject((void *)ValData2) != -1){ | 
              |     |     |  +--+-----------------------------------------------------+ 
              |     |     |     |  +------------------------+ 
   970        |     |     |     +--+ continue; // 処理済み  | 
              |     |     |     |  +------------------------+ 
              |     |     |   +-+---+ 
   971        |     |     |   |  }  | 
              |     |     |   +-----+ 
   972        |     |     +--- ArgValList-&gt;AddObject(ValData2-&gt;Str,(void *)ValData2);
              |     |   +-+---+ 
   973        |     |   |  }  | 
              |     |   +-----+ 
              |   +-+---+ 
   974        |   |  }  | 
              |   +-----+ 
   975        +--- #endif
   976        +--- /*
   977        |        for(i = 0 ; i &lt; ArgValList-&gt;Count ; i++){                              
   978        |            ValData = (TValData *)ArgValList-&gt;Objects[i];                      
   979        |            MainF-&gt;print(&quot;Arg[&quot;+ArgValList-&gt;Strings[i]+&quot;,&quot;+ValData-&gt;Str+&quot;]&quot;);  
   980        |        }                                                                      
   981        |    */                                                                         
            +-+---+ 
   982      |  }  | 
            +-----+ 
</pre>


</body>
</html>

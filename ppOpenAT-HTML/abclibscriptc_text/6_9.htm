
<html>
<head>
<title>main.h ˜_—ƒ`ƒƒ[ƒg</title><base target="main">
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="stylesheet">
<meta http-equiv="Content-Type" content="text/html;charset=Shift_JIS">
</head>

<body bgcolor="#ffffff">

<div align="right"><font size="2">ABCLibScriptC ƒvƒƒWƒFƒNƒg</font></div>

<table width=100% bgcolor="#e6e6fa" class="titlebgcolor" border="1" cellpadding="7" cellspacing="0">
<tr>
    <td><font class="titlefont">5.9. main.h ˜_—ƒ`ƒƒ[ƒg</font></td>
</tr>
</table>

<p></p>
<pre>
ƒtƒ@ƒCƒ‹˜_—ƒ`ƒƒ[ƒg

     1  +--- ï»ƒ\/*=====================================================================*
     2  |     *                                                                     *     
     3  |     *   Software Name : ppOpen-AT                                         *     
     4  |     *         Version : 0.1                                               *     
     5  |     *                                                                     *     
     6  |     *   License                                                           *     
     7  |     *     This file is part of ppOpen-AT.                                 *     
     8  |     *     ppOpen-AT is a free software, you can use it under the terms    *     
     9  |     *     of The MIT License (MIT). See LICENSE file and User's guide     *     
    10  |     *     for more details.                                               *     
    11  |     *                                                                     *     
    12  |     *   ppOpen-HPC project:                                               *     
    13  |     *     Open Source Infrastructure for Development and Execution of     *     
    14  |     *     Large-Scale Scientific Applications on Post-Peta-Scale          *     
    15  |     *     Supercomputers with Automatic Tuning (AT).                      *     
    16  |     *                                                                     *     
    17  |     *   Organizations:                                                    *     
    18  |     *     The University of Tokyo                                         *     
    19  |     *       - Information Technology Center                               *     
    20  |     *       - Atmosphere and Ocean Research Institute (AORI)              *     
    21  |     *       - Graduate School of Interdisciplinary Information Studies    *     
    22  |     *         /Earthquake Research Institute (ERI)                        *     
    23  |     *       - Graduate School of Frontier Science                         *     
    24  |     *     Kyoto University                                                *     
    25  |     *       - Academic Center for Computing and Media Studies             *     
    26  |     *     Japan Agency for Marine-Earth Science and Technology (JAMSTEC)  *     
    27  |     *                                                                     *     
    28  |     *   Sponsorship:                                                      *     
    29  |     *     Japan Science and Technology Agency (JST), Basic Research       *     
    30  |     *     Programs: CREST, Development of System Software Technologies    *     
    31  |     *     for post-Peta Scale High Performance Computing.                 *     
    32  |     *                                                                     *     
    33  |     *   Copyright (c) 2012                                                *     
    34  |     *      Information Technology Center, The University of Tokyo         *     
    35  |     *                                                                     *     
    36  |     *=====================================================================*/    
    37  +--- #ifndef mainH
    38  +--- #define mainH
    39  |    
    40  +--- #include &lt;stdio.h&gt;
    41  +--- #include &lt;string.h&gt;
    42  +--- #include &quot;VCL_Lib.h&quot;
    43  |    
    44  +--- #include &quot;pass1.h&quot;
    45  +--- #include &quot;pass2.h&quot;
    46  +--- #include &quot;pass3.h&quot;
    47  +--- #include &quot;pass4.h&quot;
    48  +--- #include &quot;pass5.h&quot;
    49  |    
    50  +--- /*----------------------------------------------------------------------------*/
    51  |    //  1.æ—Eæœƒƒèªå                                                                                                                     
    52  |    //                                                                                                                                       
    53  |    //  2.æ¦‚èƒ’                                                                                                                            
    54  |    //    ãƒBã‚AãƒƒEãƒ•ã‚©ãƒƒVãƒ ã‚ƒbãƒƒDã‚ƒP                                                                                              
    55  |    //                                                                                                                                       
    56  |    //  3.æ©Ÿèƒ½èªƒƒæ˜                                                                                                                      
    57  |    //    ãƒ—ãƒ­ã‚[ãƒƒDãƒ ãƒ‡ãƒBã‚AãƒƒEã€‚ã‚½ãƒƒVã‚ƒPãƒ•ã‚¡ã‚AãƒƒHåã®æ‰€å¾—ã‚„ãƒBãƒƒã‚»ãƒƒVã‚ƒNãƒ‡è¡ƒBç¤ƒRã€å„ãƒ‘ã‚¹ãƒ‡å‘ƒVãƒE 
    58  |    //    å‡ƒRã—ã‚’è¡Œã†ã€‚                                                                                                                
    59  |    //                                                                                                                                       
    60  |    //  4.å‚™è€ƒ                                                                                                                             
    61  |    //                                                                                                                                       
    62  |    /*----------------------------------------------------------------------------*/                                                         
    63  |                                                                                                                                             
        |  +--------------+ 
    64  +--+ class TMainF | 
    65  |  | {            | 
        |  +--+-----------+ 
        |     +-----------------------------------------+ 
    66  |     |  private:    // ãƒƒ’ãƒƒVã‚ƒJãƒƒVå®vè¨€ | 
        |     +-----------------------------------------+ 
    67  |     +--- bool IsF90SrcFile(string SrcFileName);
        |     +-----------------------------------------+ 
    68  |     |  public:     // ãƒƒ’ãƒƒVã‚ƒJãƒƒVå®vè¨€ | 
    69  |     |                                         | 
        |     +-----------------------------------------+ 
        |     |  +------------------------------------------------------------------------------------------+ 
    70  |     +--+ enum TSrcCodeType {     // å¯ƒZè±Bã‚ƒXãƒƒVã‚ƒPã‚ƒEãƒƒVãƒ‰çƒBƒ‡é¡ã€‚å…¨ä½“ã§ï¼‘ã¤ã€‚  | 
        |     |  +--+---------------------------------------------------------------------------------------+ 
    71  |     |     +--- sctNone = 0,
    72  |     |     |    sctFortran77 = 1, // ãƒ•ã‚©ãƒƒVãƒˆãƒ©ãƒƒE77ç›ƒNå½“ïƒVˆå›ºå®šæB)  
    73  |     |     |    sctFortran90 = 2, // ãƒ•ã‚©ãƒƒVãƒˆãƒ©ãƒƒE90                        
    74  |     |     |    sctC = 3,       // C                                               
        |     |   +-+---------------+ 
    75  |     |   |  }SrcCodeType;  | 
        |     |   +-----------------+ 
    76  |     |    
    77  |     +--- TStringList SrcFileNameList;        // å¯ƒZè±Bã‚ƒXãƒƒVã‚ƒPãƒ•ã‚¡ã‚AãƒƒHåãƒªã‚ƒPãƒˆã€‚
    78  |     +--- TStringList InsertModulseHeadFileNameList;
    79  |     +--- FILE *LogFp;    // ãƒƒ…ã‚[å‡ƒRåŠ›ç”¨
    80  |     |                                           
    81  |     +--- int ErrCount;
    82  |     +--- bool ErrF;
    83  |     +--- bool NotSkipByErrF;                 // ã‚ƒBãƒƒDãƒƒVãŒã‚ãvãƒ’ã‚‚åƒ‡ŸèBŒçƒJ™çƒJš
    84  |     +--- bool CloseReqF;
    85  |     +--- bool EndF;
    86  |     +--- bool VisualF;                       // Viusalzationã‚’èBŒã†ï¼ˆHTML+ãƒ‡ãƒ¼ã‚ƒ\å‡ƒRåŠ›)
    87  |     |                                        // ã‹ã®ãƒ•ãƒ©ã‚[                                  
    88  |     +--- bool DebugF;                        // Debugå‡ƒRåŠ›ON/OFF (OFFæ™‚ã¯ã€ã‚³ãƒBãƒƒEãƒˆã«
    89  |     |                                        // ã—ã¦SpeedUp)                                    
    90  |     +--- bool NoMPIF;                        // -NoMPIæŒ‡åƒ‡šïƒVˆMPIé–ué€vãƒ‡ã‚ƒEãƒƒVãƒ‰ã‚’Skipï¼‰
    91  |     +--- bool MPIF;                          // -mpiæŒ‡åƒ‡š
    92  |     +--- bool OMP_OuterF;                    // -omp otr -omp_outer æŒ‡åƒ‡š
    93  |     +--- bool OMP_InnerF;                    // -omp_inner æŒ‡åƒ‡š
    94  |     +--- string TimeFunc;                    // -timeãƒ@æŒ‡åƒ‡šã™ã‚‹æ™‚åˆƒTé–uæ•[
    95  |     |                                        // MPI_Wtime() OAT_Wtime() MyTime()      
    96  |     +--- string my_timer_start;              // -stime_and_etime ãƒ@æŒ‡åƒ‡šã™ã‚‹æƒNƒƒå®šé–¢æ•[å
    97  |     +--- string my_timer_stop;               // -stime_and_etime ãƒ@æŒ‡åƒ‡šã™ã‚‹æƒNƒƒå®šé–¢æ•[å
    98  |     |                                                                                                 
    99  |     +--- bool EECntlF;                       // -eectrlãƒ‡ãƒ•ãƒ©ã‚[(ONæ™‚ã¯ã€ã‚³ãƒƒEãƒˆãƒ­ãƒƒVãƒƒHéƒƒBåˆ†ã‚’ç½ƒ‡ãæ›ãˆïƒV‰
   100  |     |                                                                                                                             
   101  |     +--- string cc_option_str;               // -cc=ãƒ@æŒ‡åƒ‡šã™ã‚‹ã‚³ãƒƒEãƒ‘ã‚¤ãƒƒHã‚ƒFãƒ—ã‚·ãƒƒ@ãƒƒE
   102  |     |                                                                                                     
   103  |     +--- TScript *Call_SetParam_Script;      // #pragma call OAT_SetParam() ãƒ‡ã‚ƒPã‚ƒbãƒƒFãƒ—ãƒˆ
   104  |     |                                        // æœƒFè¨ƒ…å®šã®å ƒGåˆã¯NULLãƒBã™ã‚‹ã€‚           
   105  |     +--- TScript *Call_ATExec_Script;        // #pragma call OAT_ATexe() ãƒ‡ã‚ƒPã‚ƒbãƒƒFãƒ—ãƒˆ
   106  |     |                                        // æœƒFè¨ƒ…å®šã®å ƒGåˆã¯NULLãƒBã™ã‚‹ã€‚       
   107  |     +--- TStringList *Call_ATExec_ArgList;   // ATExec()å‘ƒVãƒEå‡ƒRã—æ™‚ãƒ‡å¼•æ•°ãƒƒFã‚ƒPãƒˆ
   108  |     |                                        // ValName,ValDataãƒ‡ãƒƒFã‚ƒPãƒˆã€‚è‡ªå‹•èƒ\ƒXåŠ ã•ã‚Œã‚‹ã€‚   
   109  |     |                                                                                                         
   110  |     +--- TList *TokenList;                   // ãƒˆãƒ¼ã‚ƒbãƒƒEãƒƒFã‚ƒPãƒˆ (Pass1ãƒ@ç”Ÿæˆï¼‰
   111  |     +--- TList *ValDataList;                 // å¤‰æ•°ãƒƒFã‚ƒPãƒˆ(Pass2ãƒ@ç”Ÿæˆï¼‰
   112  |     +--- TList *TuneRegionList;              // ãƒãƒ¥ãƒƒVãƒ‹ãƒ³ã‚[ãƒƒFãƒƒVã‚ƒNãƒƒ@ãƒƒEãƒƒFã‚ƒPãƒˆ(Pass4ãƒ@
   113  |     |                                        // ç”Ÿæˆ)                                                       
   114  |     +--- int CharMaxLen;                     // æ ƒVç´æ–‡å­—åˆ—ãƒ‡æœ€å¤ƒ@é•ƒLã•(TRãƒ‡åå‰ã‚’å…¨ãƒ’å…E
   115  |     |                                        // ã‚ŒãŸé•ƒLã•ïƒV‰                                             
   116  |     |                                                                                                         
   117  |     +--- TStringList *TokStrList;
   118  |     +--- bool IncludeCodeInContainsF;    // Include code in Contains
   119  |     |                                                                 
   120  |     +--- void *Pass5;
   121  |     |    
   122  |     +--- TMainF();
   123  |     +--- ~TMainF();
   124  |     +--- void GetCommandLineArg(int argc,char* argv[]);
   125  |     +--- void CodeGen();
   126  |     +--- void print(string s);
   127  |     +--- void Err(string s);
   128  |     +--- void ErrMessage(int Pos,string s);
   129  |     +--- void DispTokenList();
        |   +-+---+ 
   130  |   |  }; | 
        |   +-----+ 
   131  |    
   132  +--- extern TMainF *MainF;
   133  |    
   134  +--- void DP(string s);  // Debugç”ƒB
   135  |                                     
   136  +--- #endif
</pre>


</body>
</html>

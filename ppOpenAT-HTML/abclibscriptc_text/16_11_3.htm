
<html>
<head>
<title>GetDefStr_C メンバ関数説明</title><base target="main">
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="stylesheet">
<meta http-equiv="Content-Type" content="text/html;charset=Shift_JIS">
</head>

<body bgcolor="#ffffff">

<div align="right"><font size="2">ABCLibScriptC プロジェクト</font></div>

<table width=100% bgcolor="#e6e6fa" class="titlebgcolor" border="1" cellpadding="7" cellspacing="0">
<tr>
    <td><font class="titlefont">14.11.3. GetDefStr_C メンバ関数説明</font></td>
</tr>
</table>

<p></p>
<table border="1">
<tr><th align="left" nowrap>メンバ関数名</th>  <td nowrap>GetDefStr_C</td></tr>
<tr><th align="left" nowrap>定義ファイル名</th><td nowrap>pass2.cpp</td></tr>
<tr><th align="left" nowrap>定義行</th>        <td nowrap>2618</td></tr>
<tr><th align="left" nowrap>所属名</th>        <td nowrap>TValData</td></tr>
<tr><th align="left" nowrap>アクセス属性</th>  <td nowrap>public</td></tr>
<tr><th align="left" nowrap>宣言形式</th>      <td nowrap>string GetDefStr_C ( )</td></tr>
<tr><th align="left" nowrap>概要</th>          <td nowrap>変数の定義文字列を返す。C言語用</td></tr>
<tr><th align="left" nowrap>戻り値</th>        <td nowrap>定義文字列</td></tr>
<tr><th align="left" nowrap>パラメタ説明</th>  <td nowrap></td></tr>
<tr><th align="left" nowrap>機能説明</th>      <td nowrap></td></tr>
<tr><th align="left" nowrap>備考</th>          <td nowrap></td></tr>
</table>

<p></p>
呼出し元関数一覧表
<table border="1">
<tr>
<th nowrap>№</th>
<th nowrap>名称</th>
<th nowrap>定義ファイル名</th>
<th nowrap>定義行</th>
</tr>
<tr>
<td nowrap>1</td>
<td nowrap><a href="16_5_4.htm">TScript::GetATExecArgStr</a></td>
<td nowrap><a href="5_4.htm">pass3.cpp</a></td>
<td nowrap><a href="16_5_4.htm">663</a></td>
</tr>
<tr>
<td nowrap>2</td>
<td nowrap><a href="16_10_31.htm">TTuneRegion::OutputAutoExecCode_C</a></td>
<td nowrap><a href="5_7.htm">TuneRegion.cpp</a></td>
<td nowrap><a href="16_10_31.htm">5082</a></td>
</tr>
<tr>
<td nowrap>3</td>
<td nowrap><a href="16_10_33.htm">TTuneRegion::OutputExecCode_C</a></td>
<td nowrap><a href="5_7.htm">TuneRegion.cpp</a></td>
<td nowrap><a href="16_10_33.htm">7683</a></td>
</tr>
<tr>
<td nowrap>4</td>
<td nowrap><a href="16_10_50.htm">TTuneRegion::OutputUnrollExecCode_C</a></td>
<td nowrap><a href="5_7.htm">TuneRegion.cpp</a></td>
<td nowrap><a href="16_10_50.htm">8945</a></td>
</tr>
</table>

<p></p>
呼出し先関数一覧表
<table border="1">
<tr>
<th nowrap>№</th>
<th nowrap>名称</th>
<th nowrap>定義ファイル名</th>
<th nowrap>定義行</th>
</tr>
<tr>
<td nowrap>1</td>
<td nowrap>Trim</td>
<td nowrap><a href="5_16.htm">VCL_Lib.h</a></td>
<td nowrap>105</td>
</tr>
<tr>
<td nowrap>2</td>
<td nowrap>find</td>
<td nowrap><br></td>
<td nowrap><br></td>
</tr>
<tr>
<td nowrap>3</td>
<td nowrap>length</td>
<td nowrap><br></td>
<td nowrap><br></td>
</tr>
</table>

<p></p>
参照外部変数一覧表
<table border="1">
<tr>
<th nowrap>№</th>
<th nowrap>名称</th>
<th nowrap>定義ファイル名</th>
<th nowrap>定義行</th>
</tr>
<tr>
<td nowrap>1</td>
<td nowrap>MainF</td>
<td nowrap><a href="5_1.htm">main.cpp</a></td>
<td nowrap>53</td>
</tr>
</table>

<p></p>
参照メンバ変数一覧表
<table border="1">
<tr>
<th nowrap>№</th>
<th nowrap>名称</th>
<th nowrap>定義ファイル名</th>
<th nowrap>定義行</th>
</tr>
<tr>
<td nowrap>1</td>
<td nowrap>TValData::DataType</td>
<td nowrap><a href="5_11.htm">pass2.h</a></td>
<td nowrap>125</td>
</tr>
<tr>
<td nowrap>2</td>
<td nowrap>TValData::DefPos</td>
<td nowrap><a href="5_11.htm">pass2.h</a></td>
<td nowrap>137</td>
</tr>
<tr>
<td nowrap>3</td>
<td nowrap>TValData::DefStr1</td>
<td nowrap><a href="5_11.htm">pass2.h</a></td>
<td nowrap>129</td>
</tr>
<tr>
<td nowrap>4</td>
<td nowrap>TValData::DefStr2</td>
<td nowrap><a href="5_11.htm">pass2.h</a></td>
<td nowrap>130</td>
</tr>
</table>

<p></p>
参照先一覧表
<table border="1">
<tr>
<th nowrap>№</th>
<th nowrap>名称</th>
<th nowrap>種別</th>
<th nowrap>定義ファイル名</th>
<th nowrap>定義行</th>
</tr>
<tr>
<td nowrap>1</td>
<td nowrap><a href="16_9_1.htm">TToken</a></td>
<td nowrap>クラス</td>
<td nowrap><a href="5_10.htm">pass1.h</a></td>
<td nowrap><a href="16_9_1.htm">294</a></td>
</tr>
</table>

<p></p>
<pre>
関数論理チャート

        |  +--------------------------------+ 
  2618  +--+ string TValData::GetDefStr_C() | 
  2619     | {                              | 
           +--+-----------------------------+ 
  2620        +--- int j;
  2621        +--- string s,s2;
  2622        +--- TToken *Token;
  2623        |    
  2624        +--- s = &quot;&quot;;
              |  +--------------------+ 
  2625        +--+ if(DefStr1 != &quot;&quot;){ | 
              |  +--+-----------------+ 
  2626        |     +--- s = Trim(DefStr1 + DefStr2);
  2627        |     +--- // 変数が最初に出現する位置 DefPosから前にスキャンして、
  2628        |     |    // 変数や関数以外が現れる前に改行があれば、改行＋空白を含んだDefStr1を使用し 
  2629        |     |    // 元のソースに近い形にする。                                                
              |     |  +------------------------------------+ 
  2630        |     +--+ for(j = DefPos-1 ; j &gt;= 0 ; j--){  | 
              |     |  +--+---------------------------------+ 
  2631        |     |     +--- Token = (TToken *)MainF-&gt;TokenList-&gt;Items[j];
              |     |     |  +------------------------------------------------------------+ 
  2632        |     |     +--+ if((Token-&gt;TokId == tid_Val)||(Token-&gt;TokId == tid_Func)){ | 
              |     |     |  +--+---------------------------------------------------------+ 
              |     |     |     |  +--------+ 
  2633        |     |     |     +--+ break; | 
              |     |     |     |  +--------+ 
              |     |     |   +-+---+ 
  2634        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |     |  +----------------------------------+ 
  2635        |     |     +--+ if(Token-&gt;TokId == tid_LineEnd){ | 
              |     |     |  +--+-------------------------------+ 
              |     |     |     |  +------------------------------------------+ 
  2636        |     |     |     +--+ if(DefStr1.find('\n') == string::npos){  | 
              |     |     |     |  +--+---------------------------------------+ 
  2637        |     |     |     |     +--- s = &quot;\n&quot;+ DefStr1+Trim(DefStr2);
              |     |     |     |   +-+---+ 
  2638        |     |     |     |   |  }  | 
              |     |     |     |   +-+---+ 
              |     |     |     |   +-+-------+ 
  2638        |     |     |     |   |  else{  | 
              |     |     |     |   +-+-------+ 
  2639        |     |     |     |     +--- s = DefStr1+Trim(DefStr2);
              |     |     |     |   +-+---+ 
  2640        |     |     |     |   |  }  | 
              |     |     |     |   +-----+ 
              |     |     |   +-+---+ 
  2641        |     |     |   |  }  | 
              |     |     |   +-----+ 
              |     |   +-+---+ 
  2642        |     |   |  }  | 
              |     |   +-----+ 
              |     |  +------------------------------------------+ 
  2643        |     +--+ if((s == &quot;&quot;)||(s[s.length()-1] != '*')){ | 
              |     |  +--+---------------------------------------+ 
  2644        |     |     +--- s = s+ &quot; &quot;;
              |     |   +-+---+ 
  2645        |     |   |  }  | 
              |     |   +-----+ 
              |   +-+---+ 
  2646        |   |  }  | 
              |   +-+---+ 
              |   +-+-------+ 
  2646        |   |  else{  | 
              |   +-+-------+ 
  2647        |     +--- // 定義文字がない場合は作成して返す。一時変数等で使用される。
              |     |  +--------------------+ 
  2648        |     +--+ switch(DataType){  | 
              |     |  +--+-----------------+ 
              |     |     +---------------+ 
  2649        |     |     |  case dt_Int: | 
              |     |     +---------------+ 
  2650        |     |     +--- s += &quot;int&quot;;
              |     |     |  +--------+ 
  2651        |     |     +--+ break; | 
              |     |     |  +--------+ 
              |     |     +-----------------+ 
  2652        |     |     |  case dt_Real:  | 
              |     |     +-----------------+ 
  2653        |     |     +--- s += &quot;double&quot;;
              |     |     |  +--------+ 
  2654        |     |     +--+ break; | 
              |     |     |  +--------+ 
              |     |     +-----------------+ 
  2655        |     |     |  case dt_Char:  | 
              |     |     +-----------------+ 
  2656        |     |     +--- s += &quot;char &quot;;
              |     |     |  +--------+ 
  2657        |     |     +--+ break; | 
              |     |     |  +--------+ 
              |     |     +-----------------+ 
  2658        |     |     |  case dt_Logic: | 
              |     |     +-----------------+ 
  2659        |     |     +--- s += &quot;logical&quot;;
              |     |     |  +--------+ 
  2660        |     |     +--+ break; | 
              |     |     |  +--------+ 
              |     |     +-------------------+ 
  2661        |     |     |  case dt_Complex: | 
              |     |     +-------------------+ 
  2662        |     |     +--- s += &quot;complex&quot;;
              |     |     |  +--------+ 
  2663        |     |     +--+ break; | 
              |     |     |  +--------+ 
              |     |     +-----------------+ 
  2664        |     |     |  case dt_Float: | 
              |     |     +-----------------+ 
  2665        |     |     +--- s += &quot;float&quot;;
              |     |     |  +--------+ 
  2666        |     |     +--+ break; | 
              |     |     |  +--------+ 
              |     |     +-----------+ 
  2667        |     |     |  default: | 
              |     |     +-----------+ 
              |     |     |  +----------------+ 
  2668        |     |     +--+ return &quot;int&quot;;  | 
              |     |     |  +----------------+ 
              |     |   +-+---+ 
  2669        |     |   |  }  | 
              |     |   +-----+ 
  2670        |     +--- s = s+&quot; &quot;;
              |   +-+---+ 
  2671        |   |  }  | 
              |   +-----+ 
              |  +------------+ 
  2672        +--+ return s;  | 
              |  +------------+ 
            +-+---+ 
  2673      |  }  | 
            +-----+ 
</pre>


</body>
</html>
